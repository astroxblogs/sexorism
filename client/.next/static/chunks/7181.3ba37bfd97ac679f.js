"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7181],{7181:function(e,t,r){r.r(t),r.d(t,{QuillEditor:function(){return u}});var i=r(7437),n=r(2265),o=r(5600),l=r.n(o);r(8527);var a=r(760),d=r.n(a),s=r(3113);"undefined"!=typeof document&&void 0!==o.Quill&&o.Quill&&!o.Quill.imports["modules/imageResize"]&&o.Quill.register("modules/imageResize",d());let u=(0,n.forwardRef)((e,t)=>{let{value:r,onChange:a,onLinkClick:d}=e,u=(0,n.useRef)(null),c=t||u,m=(0,n.useCallback)(async()=>{if("undefined"==typeof document)return;if(!c||!c.current){console.error("QuillEditor ref not available for image upload"),alert("Editor not ready. Please try again.");return}let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=async()=>{if(!e.files||!e.files[0])return;let t=e.files[0],r=0,i=await new Promise(e=>{let t=()=>{if(c&&c.current&&"function"==typeof c.current.getEditor)try{let t=c.current.getEditor();if(t&&"function"==typeof t.getSelection){e(t);return}}catch(e){console.warn("Error accessing editor:",e)}r<10?(r++,setTimeout(t,100)):(console.error("Editor ref not available after retries - editorRef:",c,"editorRef.current:",null==c?void 0:c.current),e(null))};t()});if(!i){console.error("Failed to get editor instance");return}let n=i.getSelection(!0),o=n?n.index:i.getLength();i.insertText(o," [Uploading image...] ","user");let l=new FormData;l.append("image",t);try{let e=(await s.ZP.post("/admin/blogs/upload-image",l,{headers:{"Content-Type":"multipart/form-data"}})).data.imageUrl;i.deleteText(o,22,"user"),i.insertEmbed(o,"image",e,"user"),i.setSelection(o+1,0,"user")}catch(e){var a,d;console.error("Error uploading image to backend:",e),alert("Error uploading image: "+((null===(d=e.response)||void 0===d?void 0:null===(a=d.data)||void 0===a?void 0:a.error)||e.message)),i.deleteText(o,22,"user")}}},[t]),g=(0,n.useMemo)(()=>"undefined"!=typeof document&&void 0!==o.Quill&&o.Quill?{imageResize:{parchment:o.Quill.import("parchment"),modules:["Resize","DisplaySize","Toolbar"]},toolbar:{container:[[{header:[1,2,3,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]],handlers:{image:m,link:d}}}:{},[m,d]),h=(0,n.useMemo)(()=>["header","font","size","bold","italic","underline","strike","align","list","bullet","link","image","width","height","style"],[]);return(0,n.useEffect)(()=>{t&&c.current&&("function"==typeof t?t(c.current):t.current=c.current)},[t,c.current]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{children:"\n  .admin-quill-editor .ql-container {\n    overflow: hidden; /* Keeps image-resize handles contained */\n    position: relative;\n    border-bottom-left-radius: 0.5rem; /* Optional: rounds out the bottom corners */\n    border-bottom-right-radius: 0.5rem;\n    /* ✅ IMPORTANT: Ensure the overall container takes up vertical space */\n    /* This might be necessary if parent containers restrict height */\n    min-height: 800px; /* Adjust this to match your desired editor height */ \n  }\n\n  .admin-quill-editor .ql-editor {\n    /* ✅ KEY FIX: Set both height and min-height to your desired fixed size */\n    /* This creates a fixed-height scrollable area */\n    height: 800px; /* Explicitly set the height you want */\n    min-height: 800px; /* Ensure it doesn't shrink */\n    overflow-y: auto; /* Enable vertical scrolling */\n    padding-bottom: 1rem; /* Add some padding at the bottom for better typing experience */\n  }\n\n  .admin-quill-editor .ql-editor img {\n    max-width: 100%;\n    height: auto;\n    display: block;\n  }\n  .image-resize .handle {\n    background-color: #3b82f6;\n    border: 1px solid #fff;\n    border-radius: 9999px;\n    opacity: 0.8;\n  }\n  .image-resize .overlay {\n    border-color: #3b82f6;\n  }\n"}),(0,i.jsx)(l(),{ref:c,theme:"snow",value:r,onChange:a,modules:g,formats:h,className:"bg-white dark:bg-gray-700 text-gray-900 dark:text-white admin-quill-editor"})]})})}}]);