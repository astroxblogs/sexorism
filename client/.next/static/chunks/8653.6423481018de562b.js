"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8653],{8653:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var a=r(7437),n=r(2265),s=r(3949);let o=(0,r(9205).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var l=r(3113),d=e=>{let{blogId:t,initialComments:r,visitorId:d}=e,{t:c}=(0,s.$G)(),[i,m]=(0,n.useState)(r||[]),[u,x]=(0,n.useState)(""),[b,g]=(0,n.useState)(""),[h,y]=(0,n.useState)(!1),[f,p]=(0,n.useState)(""),k=localStorage.getItem("adminToken");(0,n.useEffect)(()=>{m(r||[])},[r]);let j=async e=>{if(e.preventDefault(),!u.trim()||!b.trim()){p("Name and comment cannot be empty.");return}y(!0),p("");try{let e=await (0,l.Ir)(t,{visitorId:d,name:u,comment:b});m([...i,e.comment]),x(""),g("")}catch(e){console.error("Error posting comment:",e),p("Failed to post comment. Please try again.")}finally{y(!1)}},v=async e=>{if(window.confirm(c("Are you sure you want to delete this comment?")))try{await l.ZP.delete("/blogs/".concat(t,"/comments/").concat(e),{headers:{Authorization:"Bearer ".concat(k)}}),m(i.filter(t=>t._id!==e))}catch(e){console.error("Error deleting comment:",e),alert(c("Failed to delete comment."))}};return(0,a.jsxs)("section",{id:"comments",className:"mt-10 pt-6 border-t dark:border-gray-700",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold mb-4",children:[c("comment")," (",i.length,")"]}),(0,a.jsxs)("form",{onSubmit:j,className:"flex flex-col md:flex-row gap-4 mb-8",children:[(0,a.jsx)("input",{className:"border border-gray-300 dark:border-gray-700 rounded px-3 py-2 w-full md:w-1/4 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:c("name"),value:u,onChange:e=>x(e.target.value),required:!0}),(0,a.jsx)("input",{className:"border border-gray-300 dark:border-gray-700 rounded px-3 py-2 flex-1 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:c("Comment here"),value:b,onChange:e=>g(e.target.value),required:!0}),(0,a.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded font-semibold transition-colors disabled:bg-blue-400",type:"submit",disabled:h,children:h?"Submitting...":c("submit")})]}),f&&(0,a.jsx)("p",{className:"text-red-500 text-sm mb-4",children:f}),(0,a.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,a.jsxs)("div",{className:"rounded-lg bg-gray-100 dark:bg-gray-800 p-4 flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-gray-800 dark:text-gray-200 mb-1",children:e.name}),(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:e.comment}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),k&&(0,a.jsx)("button",{onClick:()=>v(e._id),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/50","aria-label":"Delete comment",children:(0,a.jsx)(o,{size:16})})]},e._id))})]})}}}]);