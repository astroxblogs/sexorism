(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6225],{7920:function(e,t,a){Promise.resolve().then(a.bind(a,434))},434:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var r=a(7437),s=a(2265),l=a(9376),n=a(5583),o=a(1780),d=a(166),i=a(9501),c=a(3113);a(8527);let g=e=>{let{isOpen:t,onClose:a,onConfirm:l,initialText:n}=e,[o,d]=(0,s.useState)(""),[i,c]=(0,s.useState)("https://");return((0,s.useEffect)(()=>{t&&(d(n),c("https://"))},[t,n]),t)?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 w-full max-w-md",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-gray-100",children:"Insert Link"}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Display Text"}),(0,r.jsx)("input",{className:"border border-gray-300 dark:border-gray-700 p-2 rounded w-full text-gray-900 dark:text-white bg-white dark:bg-gray-700",value:o,onChange:e=>d(e.target.value),placeholder:"e.g., Read more"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"URL"}),(0,r.jsx)("input",{className:"border border-gray-300 dark:border-gray-700 p-2 rounded w-full text-gray-900 dark:text-white bg-white dark:bg-gray-700",value:i,onChange:e=>c(e.target.value),placeholder:"https://example.com"})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,r.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 rounded border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200",children:"Cancel"}),(0,r.jsx)("button",{type:"button",onClick:()=>{o.trim()&&"https://"!==i.trim()&&l(o,i)},className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white",children:"Insert"})]})]})}):null},x=(0,d.default)(()=>Promise.all([a.e(3070),a.e(4346),a.e(7181)]).then(a.bind(a,7181)).then(e=>({default:e.QuillEditor})),{loadableGenerated:{webpack:()=>[7181]},ssr:!1,loading:()=>(0,r.jsx)("div",{className:"h-96 bg-gray-100 animate-pulse rounded-md"})}),m=[{code:"en",name:"English"},{code:"hi",name:"Hindi"}];var u=e=>{let{blog:t,onSave:a,onCancel:l}=e,{register:d,handleSubmit:u,reset:b,setValue:h,watch:p}=(0,i.cI)(),[y,f]=(0,s.useState)("en"),[j,v]=(0,s.useState)(()=>{let e={};return m.forEach(t=>{e[t.code]=""}),e}),[N,w]=(0,s.useState)(null),[k,_]=(0,s.useState)(!1),C=(0,s.useRef)(null),D=(0,s.useRef)(null),[S,E]=(0,s.useState)([]),[A,T]=(0,s.useState)(!0),[F,M]=(0,s.useState)(null),[B,P]=(0,s.useState)(!1),[L,U]=(0,s.useState)(null),[O,I]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{T(!0);let e=await c.ZP.get("/admin/categories");E(e.data),T(!1)}catch(e){console.error("Error fetching categories:",e),M("Failed to fetch categories."),T(!1)}})()},[]),(0,s.useEffect)(()=>{if(t){b(t);let e={};m.forEach(a=>{h("title_".concat(a.code),t["title_".concat(a.code)]||""),e[a.code]=t["content_".concat(a.code)]||"",h("excerpt_".concat(a.code),t["excerpt_".concat(a.code)]||""),h("metaTitle_".concat(a.code),t["metaTitle_".concat(a.code)]||""),h("metaDescription_".concat(a.code),t["metaDescription_".concat(a.code)]||"")}),h("title",t.title||""),e.en=e.en||t.content||"",v(e),h("image",t.image||""),t.tags&&Array.isArray(t.tags)?h("tags",t.tags.join(", ")):h("tags",""),w(null),C.current&&(C.current.value="")}else{var e;b({title:"",image:"",tags:"",category:(null===(e=S[0])||void 0===e?void 0:e.name_en)||""});let t={};m.forEach(e=>t[e.code]=""),v(t),f("en"),w(null),C.current&&(C.current.value="")}},[t,b,h,S]);let R=e=>{v(t=>(0,o._)((0,n._)({},t),{[y]:e}))},Z=e=>{if(!e)return null;let t=new DOMParser().parseFromString(e,"text/html").querySelector("img");return t?t.src:null},z=async()=>{if(!N)return;_(!0);let e=new FormData;e.append("image",N);try{let t=await c.ZP.post("/admin/blogs/upload-image",e,{headers:{"Content-Type":"multipart/form-data"}});h("image",t.data.imageUrl),w(null),C.current&&(C.current.value=""),alert("Main cover image uploaded successfully!")}catch(e){var t,a;alert("Error uploading main cover image: "+((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||e.message))}finally{_(!1)}},V=(0,s.useCallback)(()=>{var e;let t=null===(e=D.current)||void 0===e?void 0:e.getEditor();if(!t)return;let a=t.getSelection(!0)||{index:t.getLength(),length:0},r=t.getText(a.index,a.length)||"";U(a),I(r||"link"),P(!0)},[]),q=(0,s.useCallback)((e,t)=>{var a;let r=null===(a=D.current)||void 0===a?void 0:a.getEditor();if(!r||!L)return;let s=L.index,l=L.length||0;l>0&&r.deleteText(s,l,"user"),r.insertText(s,e,"user"),r.formatText(s,e.length,"link",t,"user"),r.setSelection(s+e.length,0,"user"),P(!1)},[L]),G=async e=>{let r="string"==typeof e.tags?e.tags.split(",").map(e=>e.trim()).filter(Boolean):[],s=e.image;s||N||(s=Z(j.en)),s&&(s=s.trim());let l={image:s,tags:r,category:e.category,title:e.title_en||e.title,content:j.en||e.content};m.forEach(t=>{l["title_".concat(t.code)]=e["title_".concat(t.code)],l["content_".concat(t.code)]=j[t.code],l["excerpt_".concat(t.code)]=e["excerpt_".concat(t.code)],l["metaTitle_".concat(t.code)]=e["metaTitle_".concat(t.code)],l["metaDescription_".concat(t.code)]=e["metaDescription_".concat(t.code)]});try{let e=t?await c.ZP.put("/admin/blogs/".concat(t._id),l):await c.ZP.post("/admin/blogs",l);a(e.data),b();let r={};m.forEach(e=>r[e.code]=""),v(r)}catch(e){var n,o;alert("Error saving blog: "+((null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.error)||e.message))}},H=p("metaTitle_".concat(y)),K=p("metaDescription_".concat(y));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("form",{onSubmit:u(G),className:"mb-8 bg-gray-50 dark:bg-gray-800 p-6 rounded-lg shadow flex flex-col gap-4 max-w-4xl mx-auto",children:[(0,r.jsx)("div",{className:"flex justify-center border-b border-gray-200 dark:border-gray-700",children:m.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>f(e.code),className:"px-4 py-2 text-sm font-medium ".concat(y===e.code?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"," focus:outline-none transition-colors duration-200"),children:e.name},e.code))}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"block font-medium text-sm text-gray-700 dark:text-gray-300",children:"Main Cover Image"}),(0,r.jsx)("input",(0,n._)({className:"border border-gray-300 dark:border-gray-700 p-2 rounded w-full text-gray-900 dark:text-white bg-white dark:bg-gray-700",placeholder:"Paste Image URL"},d("image"))),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]?(w(e.target.files[0]),h("image","")):w(null)},ref:C,className:"block w-full text-sm text-gray-900 dark:text-white file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900 dark:file:text-blue-300 dark:hover:file:bg-blue-800"}),N&&(0,r.jsx)("button",{type:"button",onClick:z,disabled:k,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",children:k?"Uploading...":"Upload Image"})]}),p("image")&&(0,r.jsx)("div",{className:"mt-2 text-center",children:(0,r.jsx)("img",{src:p("image"),alt:"Cover Preview",className:"max-h-48 object-contain mx-auto rounded-md shadow-md"})})]}),(0,r.jsx)("input",(0,n._)({className:"border border-gray-300 dark:border-gray-700 p-2 rounded w-full text-gray-900 dark:text-white bg-white dark:bg-gray-700",placeholder:"Tags (comma separated)"},d("tags"))),A?(0,r.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading categories..."}):F?(0,r.jsx)("div",{className:"text-red-500 dark:text-red-400",children:F}):(0,r.jsx)("select",(0,o._)((0,n._)({className:"border border-gray-300 dark:border-gray-700 p-2 rounded w-full text-gray-900 dark:text-white bg-white dark:bg-gray-700"},d("category",{required:!0})),{children:S.map(e=>(0,r.jsx)("option",{value:e.name_en,children:e.name_en},e.slug))})),m.map(e=>y===e.code&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("input",(0,n._)({className:"border border-gray-300 dark:border-gray-700 p-2 rounded w-full text-gray-900 dark:text-white bg-white dark:bg-gray-700",placeholder:"Title (".concat(e.name,")")},d("title_".concat(e.code),{required:"en"===e.code}))),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block font-medium text-sm mb-1 text-gray-700 dark:text-gray-300",children:["Content (",e.name,")"]}),(0,r.jsx)(x,{ref:D,value:j[e.code],onChange:R,onLinkClick:V})]})]},e.code)),(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:["SEO & Excerpt (",m.find(e=>e.code===y).name,")"]}),m.map(e=>y===e.code&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"excerpt_".concat(e.code),className:"block font-medium text-sm text-gray-700 dark:text-gray-300",children:"Excerpt"}),(0,r.jsx)("textarea",(0,o._)((0,n._)({id:"excerpt_".concat(e.code)},d("excerpt_".concat(e.code))),{placeholder:"A short summary of the post for blog listing pages.",rows:"3",className:"mt-1 border border-gray-300 dark:border-gray-700 p-2 rounded w-full text-gray-900 dark:text-white bg-white dark:bg-gray-700"}))]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"metaTitle_".concat(e.code),className:"block font-medium text-sm text-gray-700 dark:text-gray-300",children:"Meta Title"}),(0,r.jsx)("input",(0,o._)((0,n._)({id:"metaTitle_".concat(e.code)},d("metaTitle_".concat(e.code))),{placeholder:"An SEO-friendly title for search engine results (around 120 characters).",className:"mt-1 border border-gray-300 dark:border-gray-700 p-2 rounded w-full text-gray-900 dark:text-white bg-white dark:bg-gray-700"})),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Character count: ",(null==H?void 0:H.length)||0," / 120"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"metaDescription_".concat(e.code),className:"block font-medium text-sm text-gray-700 dark:text-gray-300",children:"Meta Description"}),(0,r.jsx)("textarea",(0,o._)((0,n._)({id:"metaDescription_".concat(e.code)},d("metaDescription_".concat(e.code))),{placeholder:"A compelling description for search engine results (around 500 characters).",rows:"4",className:"mt-1 border border-gray-300 dark:border-gray-700 p-2 rounded w-full text-gray-900 dark:text-white bg-white dark:bg-gray-700"})),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Character count: ",(null==K?void 0:K.length)||0," / 500"]})]})]},e.code))]}),(0,r.jsxs)("div",{className:"flex justify-end items-center space-x-4 pt-4 mt-4 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:l,className:"px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-3 border border-transparent rounded-lg text-sm font-medium text-white bg-green-600 hover:bg-green-700 disabled:opacity-50",children:t?"Update Blog":"Submit Blog"})]})]}),(0,r.jsx)(g,{isOpen:B,onClose:()=>P(!1),onConfirm:q,initialText:O})]})},b=a(3411),h=a(3949),p=a(9064),y=e=>{let{onApprovedOrRejected:t,onEdit:a}=e,{t:l}=(0,h.$G)(),[n,o]=(0,s.useState)([]),[d,i]=(0,s.useState)(!0),[g,x]=(0,s.useState)(""),m=(0,s.useCallback)(async()=>{i(!0);try{var e;let t=await c.ZP.get("/admin/blogs/pending?limit=100");o((null===(e=t.data)||void 0===e?void 0:e.blogs)||[]),x("")}catch(e){x("Failed to load pending blogs"),p.Am.error("Failed to load pending blogs")}finally{i(!1)}},[]);(0,s.useEffect)(()=>{m()},[m]);let u=async(e,a)=>{try{"approve"===a?(await c.ZP.post("/admin/blogs/".concat(e,"/approve")),p.Am.success("Blog has been approved!")):(await c.ZP.post("/admin/blogs/".concat(e,"/reject")),p.Am.error("Blog has been rejected.")),o(t=>t.filter(t=>t._id!==e)),t&&t()}catch(e){p.Am.error("Failed to ".concat(a," the blog."))}};return d?(0,r.jsx)("div",{className:"text-center p-6 dark:text-gray-200",children:"Loading pending blogs..."}):g?(0,r.jsx)("div",{className:"text-center p-6 text-red-500",children:g}):(0,r.jsxs)("div",{className:"overflow-x-auto",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-gray-800 dark:text-gray-200 text-center",children:l("Blogs Pending Approval")}),0===n.length?(0,r.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:"There are currently no blogs awaiting approval."}):(0,r.jsxs)("table",{className:"min-w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[(0,r.jsx)("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Author"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Title"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Submitted On"}),(0,r.jsx)("th",{className:"py-3 px-4 text-center text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(e=>{var t;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[(0,r.jsx)("td",{className:"py-4 px-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:(null===(t=e.createdBy)||void 0===t?void 0:t.username)||"Unknown"}),(0,r.jsx)("td",{className:"py-4 px-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.title_en||e.title}),(0,r.jsx)("td",{className:"py-4 px-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.category}),(0,r.jsx)("td",{className:"py-4 px-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:new Date(e.createdAt||e.date).toLocaleDateString()}),(0,r.jsx)("td",{className:"py-4 px-4 whitespace-nowrap text-center text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>a(e),className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"View"}),(0,r.jsx)("button",{onClick:()=>u(e._id,"approve"),className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700 transition-colors",children:"Approve"}),(0,r.jsx)("button",{onClick:()=>u(e._id,"reject"),className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700 transition-colors",children:"Reject"})]})})]},e._id)})})]})]})},f=a(2394),j=a(988),v=a(2786),N=a(6407),w=()=>{let[e,t]=(0,s.useState)(null),[a,n]=(0,s.useState)("dashboard"),[o,d]=(0,s.useState)(!1),[i,g]=(0,s.useState)(()=>{try{return sessionStorage.getItem("astrox_admin_role_session")||"admin"}catch(e){}return"admin"}),[x,m]=(0,s.useState)(0),h=(0,l.useRouter)(),p=(0,l.useSearchParams)(),[w,k]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(p){let e=p.get("edit");if(e)try{t(JSON.parse(decodeURIComponent(e))),n("blogForm")}catch(e){console.error("Error parsing blog to edit:",e)}}try{let e=sessionStorage.getItem("astrox_admin_role_session");e&&g(e)}catch(e){}},[p]);let _=()=>{t(null),n("blogList")},C=()=>{t(null),k(e=>e+1)},D=async()=>{try{await c.Ew.logout(),(0,c.M8)(null),h.push("/")}catch(e){console.error("Logout failed:",e),(0,c.M8)(null),h.push("/login")}},S=(0,s.useCallback)(async()=>{try{var e;let t=await c.Ew.getPendingBlogs({params:{page:1,limit:1,_cacheBust:Date.now()}});m((null===(e=t.data)||void 0===e?void 0:e.totalBlogs)||0)}catch(e){console.error("Failed to fetch pending count:",e),m(0)}},[]);(0,s.useEffect)(()=>{let e;return"admin"===i&&(S(),e=setInterval(()=>{S()},3e4)),()=>{e&&clearInterval(e)}},[i,S]);let E=e=>{n(e)},A=[{id:"dashboard",label:"Dashboard",icon:"\uD83C\uDFE0",color:"text-blue-600",bgColor:"bg-blue-50 hover:bg-blue-100",activeColor:"bg-blue-600 text-white"},{id:"blogForm",label:"Add New Blog",icon:"✍️",color:"text-green-600",bgColor:"bg-green-50 hover:bg-green-100",activeColor:"bg-green-600 text-white"},{id:"blogList",label:"Manage Blogs",icon:"\uD83D\uDCDD",color:"text-purple-600",bgColor:"bg-purple-50 hover:bg-purple-100",activeColor:"bg-purple-600 text-white"},..."admin"===i?[{id:"pendingApprovals",label:"Pending Approvals",icon:"⏳",color:"text-yellow-600",bgColor:"bg-yellow-50 hover:bg-yellow-100",activeColor:"bg-yellow-600 text-white",badge:x},{id:"categoryManager",label:"Categories",icon:"\uD83C\uDFF7️",color:"text-indigo-600",bgColor:"bg-indigo-50 hover:bg-indigo-100",activeColor:"bg-indigo-600 text-white"},{id:"operatorManagement",label:"Operators",icon:"\uD83D\uDC65",color:"text-cyan-600",bgColor:"bg-cyan-50 hover:bg-cyan-100",activeColor:"bg-cyan-600 text-white"},{id:"subscriberManagement",label:"Subscribers",icon:"\uD83D\uDCE7",color:"text-teal-600",bgColor:"bg-teal-50 hover:bg-teal-100",activeColor:"bg-teal-600 text-white"},{id:"adminSettings",label:"Settings",icon:"⚙️",color:"text-gray-600",bgColor:"bg-gray-50 hover:bg-gray-100",activeColor:"bg-gray-600 text-white"}]:[]];return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b sticky top-0 z-40",children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>d(!o),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors lg:hidden",children:(0,r.jsx)("span",{className:"text-xl",children:"☰"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"AstroX Admin"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-2 bg-gray-100 rounded-lg px-3 py-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Role:"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:i})]}),(0,r.jsx)("button",{onClick:D,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Logout"})]})]})}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"".concat(o?"w-20":"w-64"," bg-white shadow-lg min-h-screen transition-all duration-300 flex-shrink-0 border-r"),children:(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("nav",{className:"space-y-2",children:A.map(e=>(0,r.jsxs)("button",{onClick:()=>E(e.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 ".concat(a===e.id?e.activeColor:"".concat(e.bgColor," ").concat(e.color)),children:[(0,r.jsx)("span",{className:"text-lg",children:e.icon}),!o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"flex-1 text-left",children:e.label}),e.badge&&e.badge>0&&(0,r.jsx)("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:e.badge})]})]},e.id))})})}),(0,r.jsx)("div",{className:"flex-1 p-6",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(()=>{switch(a){case"dashboard":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Quick Actions"}),(0,r.jsx)("p",{className:"text-blue-100 mb-4",children:"Start creating content"}),(0,r.jsx)("button",{onClick:()=>E("blogForm"),className:"bg-white text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-blue-50 transition-colors",children:"Create New Blog"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Content Management"}),(0,r.jsx)("p",{className:"text-green-100 mb-4",children:"Manage your blogs"}),(0,r.jsx)("button",{onClick:()=>E("blogList"),className:"bg-white text-green-600 px-4 py-2 rounded-lg font-medium hover:bg-green-50 transition-colors",children:"View All Blogs"})]}),"admin"===i&&(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 text-white",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Pending Reviews"}),(0,r.jsxs)("p",{className:"text-purple-100 mb-4",children:[x," items waiting"]}),(0,r.jsx)("button",{onClick:()=>E("pendingApprovals"),className:"bg-white text-purple-600 px-4 py-2 rounded-lg font-medium hover:bg-purple-50 transition-colors",children:"Review Now"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Welcome to Your Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Select an option from the sidebar to get started. You can create new blog posts, manage existing content, and handle administrative tasks."})]})]});case"blogForm":return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:e?"Editing: ".concat(e.title_en||""):"Add new blog post"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(u,{blog:e,onSave:_,onCancel:C},e?e._id:w)})]});case"blogList":return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Manage Blogs"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(b.T,{blogs:[],onEdit:e=>{t(e),E("blogForm")},onDelete:e=>{console.log("Delete blog:",e)},onUpdateDate:(e,t)=>{console.log("Update date:",e,t)}})})]});case"categoryManager":return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Category Management"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(f.default,{})})]});case"pendingApprovals":return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Pending Approvals"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(y,{onApprovedOrRejected:S,onEdit:e=>{t(e),n("blogForm")}})})]});case"operatorManagement":return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Operator Management"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(j.default,{})})]});case"adminSettings":return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Admin Settings"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(v.default,{})})]});case"subscriberManagement":return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:"Subscriber Management"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(N.default,{})})]});default:return(0,r.jsx)("div",{className:"text-center text-gray-500",children:"Select an option from the sidebar"})}})()})})]})]})}},2394:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var r=a(7437),s=a(3411);function l(){return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Category Manager"}),(0,r.jsx)(s.T,{blogs:[],onEdit:e=>console.log("Edit category:",e),onDelete:e=>console.log("Delete category:",e),onUpdateDate:(e,t)=>console.log("Update category date:",e,t)})]})}},988:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var r=a(7437),s=a(3411);function l(){return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Operator Management"}),(0,r.jsx)(s.T,{blogs:[],onEdit:e=>console.log("Edit operator:",e),onDelete:e=>console.log("Delete operator:",e),onUpdateDate:(e,t)=>console.log("Update operator date:",e,t)})]})}},6407:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var r=a(7437),s=a(3411);function l(){return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Subscriber Management"}),(0,r.jsx)(s.T,{blogs:[],onEdit:e=>console.log("Edit subscriber:",e),onDelete:e=>console.log("Delete subscriber:",e),onUpdateDate:(e,t)=>console.log("Update subscriber date:",e,t)})]})}},3411:function(e,t,a){"use strict";a.d(t,{T:function(){return n}});var r=a(7437),s=a(2265),l=a(3949);let n=e=>{let{blogs:t,onEdit:a,onDelete:n,onUpdateDate:o,startIndex:d=0}=e,{t:i}=(0,l.$G)(),[c,g]=(0,s.useState)(null),[x,m]=(0,s.useState)(null),u=new Date().toISOString().split("T")[0],b=t?t.filter(e=>e):[],h=e=>{n&&n(e),g(null)},p=(e,t)=>{let a=new Date(t),r=new Date;if(r.setHours(23,59,59,999),a>r){alert("Time travel isn't a feature... yet! \uD83D\uDE09 Please select a date from today or the past."),m(null);return}t&&o&&o(e,t),m(null)},y=e=>new Date(e).toISOString().split("T")[0];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"hidden md:block overflow-x-auto rounded-lg shadow mt-8",children:(0,r.jsxs)("table",{className:"min-w-full bg-white dark:bg-gray-900",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-200 w-16",children:i("S.No.")}),(0,r.jsx)("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-200",children:i("Title")}),(0,r.jsx)("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-200",children:i("Author")}),(0,r.jsx)("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-200",children:i("Category")}),(0,r.jsx)("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-200",children:i("Date")}),(0,r.jsx)("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-200",children:i("Actions")})]})}),(0,r.jsx)("tbody",{children:b.map((e,t)=>{var s;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,r.jsx)("td",{className:"p-4 font-medium text-gray-900 dark:text-gray-100",children:d+t+1}),(0,r.jsx)("td",{className:"p-4 font-medium text-gray-900 dark:text-gray-100",children:e.title_en||e.title}),(0,r.jsx)("td",{className:"p-4 text-gray-600 dark:text-gray-300",children:(null===(s=e.createdBy)||void 0===s?void 0:s.username)||"N/A"}),(0,r.jsx)("td",{className:"p-4 text-gray-600 dark:text-gray-300",children:e.category}),(0,r.jsx)("td",{className:"p-4 text-gray-500 dark:text-gray-400",children:x===e._id?(0,r.jsx)("input",{type:"date",defaultValue:y(e.date),max:u,onBlur:t=>p(e._id,t.target.value),onKeyDown:t=>{"Enter"===t.key&&p(e._id,t.target.value)},autoFocus:!0,className:"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md p-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,r.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>m(e._id),children:[(0,r.jsx)("span",{children:new Date(e.date).toLocaleDateString()}),(0,r.jsx)("span",{className:"text-gray-400 hover:text-blue-500",title:"Edit Date",children:"✏️"})]})}),(0,r.jsxs)("td",{className:"p-4",children:[(0,r.jsx)("button",{className:"text-green-600 hover:underline mr-4",onClick:()=>a(e),children:i("Edit")}),(0,r.jsx)("button",{className:"text-red-600 hover:underline",onClick:()=>g(e._id),children:i("Delete")})]})]},e._id)})})]})}),(0,r.jsx)("div",{className:"md:hidden mt-4 space-y-4",children:b.map((e,t)=>{var s;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg shadow border border-gray-200 dark:border-gray-700 relative",children:[(0,r.jsx)("span",{className:"absolute top-2 right-2 text-xs font-bold text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-800 rounded-full w-6 h-6 flex items-center justify-center",children:d+t+1}),(0,r.jsx)("h3",{className:"text-lg font-bold mb-1 text-gray-900 dark:text-gray-100 pr-8",children:e.title_en||e.title}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i("Author"),": ",(0,r.jsx)("span",{className:"font-semibold",children:(null===(s=e.createdBy)||void 0===s?void 0:s.username)||"N/A"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i("Category"),": ",(0,r.jsx)("span",{className:"font-semibold",children:e.category})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:[i("Date"),":"," ",x===e._id?(0,r.jsx)("input",{type:"date",defaultValue:y(e.date),max:u,onBlur:t=>p(e._id,t.target.value),onKeyDown:t=>{"Enter"===t.key&&p(e._id,t.target.value)},autoFocus:!0,className:"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md p-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 mt-1"}):(0,r.jsxs)("span",{className:"font-semibold cursor-pointer",onClick:()=>m(e._id),children:[new Date(e.date).toLocaleDateString(),(0,r.jsx)("span",{className:"ml-2 text-gray-400 hover:text-blue-500",title:"Edit Date",children:"✏️"})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{className:"text-sm text-green-600 hover:underline font-medium",onClick:()=>a(e),children:i("Edit")}),(0,r.jsx)("button",{className:"text-sm text-red-600 hover:underline font-medium",onClick:()=>g(e._id),children:i("Delete")})]})]},e._id)})}),c&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-8 shadow-lg max-w-sm w-full",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100",children:i("confirm delete title")}),(0,r.jsx)("p",{className:"mb-6 text-gray-700 dark:text-gray-300",children:i("confirm delete message")}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)("button",{className:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-700",onClick:()=>g(null),children:i("Cancel")}),(0,r.jsx)("button",{className:"px-4 py-2 rounded bg-red-600 text-white",onClick:()=>h(c),children:i("Delete")})]})]})})]})}}},function(e){e.O(0,[6458,3949,3464,9413,2786,2971,2117,1744],function(){return e(e.s=7920)}),_N_E=e.O()}]);