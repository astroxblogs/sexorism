"use strict";exports.id=138,exports.ids=[138],exports.modules={3138:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var a=r(326),s=r(7577),l=r(12);let o=(0,r(2881).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var n=r(1207);let d=({blogId:e,initialComments:t,visitorId:r})=>{let{t:d}=(0,l.$G)(),[i,m]=(0,s.useState)(t||[]),[c,u]=(0,s.useState)(""),[x,b]=(0,s.useState)(""),[g,y]=(0,s.useState)(!1),[h,p]=(0,s.useState)(""),f=localStorage.getItem("adminToken");(0,s.useEffect)(()=>{m(t||[])},[t]);let j=async t=>{if(t.preventDefault(),!c.trim()||!x.trim()){p("Name and comment cannot be empty.");return}y(!0),p("");try{let t=await (0,n.Ir)(e,{visitorId:r,name:c,comment:x});m([...i,t.comment]),u(""),b("")}catch(e){console.error("Error posting comment:",e),p("Failed to post comment. Please try again.")}finally{y(!1)}},v=async t=>{if(window.confirm(d("Are you sure you want to delete this comment?")))try{await n.ZP.delete(`/blogs/${e}/comments/${t}`,{headers:{Authorization:`Bearer ${f}`}}),m(i.filter(e=>e._id!==t))}catch(e){console.error("Error deleting comment:",e),alert(d("Failed to delete comment."))}};return(0,a.jsxs)("section",{id:"comments",className:"mt-10 pt-6 border-t dark:border-gray-700",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold mb-4",children:[d("comment")," (",i.length,")"]}),(0,a.jsxs)("form",{onSubmit:j,className:"flex flex-col md:flex-row gap-4 mb-8",children:[a.jsx("input",{className:"border border-gray-300 dark:border-gray-700 rounded px-3 py-2 w-full md:w-1/4 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:d("name"),value:c,onChange:e=>u(e.target.value),required:!0}),a.jsx("input",{className:"border border-gray-300 dark:border-gray-700 rounded px-3 py-2 flex-1 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:d("Comment here"),value:x,onChange:e=>b(e.target.value),required:!0}),a.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded font-semibold transition-colors disabled:bg-blue-400",type:"submit",disabled:g,children:g?"Submitting...":d("submit")})]}),h&&a.jsx("p",{className:"text-red-500 text-sm mb-4",children:h}),a.jsx("div",{className:"space-y-4",children:i.map(e=>(0,a.jsxs)("div",{className:"rounded-lg bg-gray-100 dark:bg-gray-800 p-4 flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200 mb-1",children:e.name}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:e.comment}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),f&&a.jsx("button",{onClick:()=>v(e._id),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/50","aria-label":"Delete comment",children:a.jsx(o,{size:16})})]},e._id))})]})}}};