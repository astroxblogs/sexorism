/*! For license information please see 432.00ba1a17.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[432],{4432:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var r=a(5043),o=a(9722),n=a(4117);const s=(0,a(7784).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var l=a(4544),c=a(4505),d=a(579);const i=e=>{let{blogId:t,initialComments:a}=e;const{t:i}=(0,n.Bd)(),[m,u]=(0,r.useState)(a||[]),[b,x]=(0,r.useState)(""),[g,h]=(0,r.useState)(""),[y,p]=(0,r.useState)(!1),[f,k]=(0,r.useState)(""),v=localStorage.getItem("adminToken");return(0,d.jsxs)("section",{id:"comments",className:"mt-10 pt-6 border-t dark:border-gray-700",children:[(0,d.jsxs)("h3",{className:"text-2xl font-bold mb-4",children:[i("comment")," (",m.length,")"]}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b.trim()&&g.trim()){p(!0),k("");try{const e=await o.A.post("/api/blogs/".concat(t,"/comments"),{name:b,comment:g});u([...m,e.data.comment]),x(""),h("");const r=(0,l.ak)();if(r)try{await(0,c.ew)(r,t),console.log("Comment behavior for blog ".concat(t," tracked for subscriber:"),r)}catch(a){console.error("Failed to track comment for personalization:",a)}}catch(r){console.error("Error posting comment:",r),k("Failed to post comment. Please try again.")}finally{p(!1)}}else k("Name and comment cannot be empty.")},className:"flex flex-col md:flex-row gap-4 mb-8",children:[(0,d.jsx)("input",{className:"border border-gray-300 dark:border-gray-700 rounded px-3 py-2 w-full md:w-1/4 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:i("name"),value:b,onChange:e=>x(e.target.value),required:!0}),(0,d.jsx)("input",{className:"border border-gray-300 dark:border-gray-700 rounded px-3 py-2 flex-1 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:i("Comment here"),value:g,onChange:e=>h(e.target.value),required:!0}),(0,d.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded font-semibold transition-colors disabled:bg-blue-400",type:"submit",disabled:y,children:y?"Submitting...":i("submit")})]}),f&&(0,d.jsx)("p",{className:"text-red-500 text-sm mb-4",children:f}),(0,d.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,d.jsxs)("div",{className:"rounded-lg bg-gray-100 dark:bg-gray-800 p-4 flex justify-between items-start",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-bold text-gray-800 dark:text-gray-200 mb-1",children:e.name}),(0,d.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:e.comment}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),v&&(0,d.jsx)("button",{onClick:()=>(async e=>{if(window.confirm(i("Are you sure you want to delete this comment?")))try{await o.A.delete("/api/blogs/".concat(t,"/comments/").concat(e),{headers:{Authorization:"Bearer ".concat(v)}}),u(m.filter(t=>t._id!==e))}catch(a){console.error("Error deleting comment:",a),alert(i("Failed to delete comment."))}})(e._id),className:"text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/50","aria-label":"Delete comment",children:(0,d.jsx)(s,{size:16})})]},e._id))})]})}}}]);
//# sourceMappingURL=432.00ba1a17.chunk.js.map