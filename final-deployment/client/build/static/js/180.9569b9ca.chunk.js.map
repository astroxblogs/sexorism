{"version":3,"file":"static/js/180.9569b9ca.chunk.js","mappings":"4LAOA,MAAMA,GAAWC,EAAAA,EAAAA,MAAK,IAAM,wCA6F5B,EA1FgBC,KACZ,MAAM,QAAEC,IAAYC,EAAAA,EAAAA,MACbC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,OAC5BK,EAAaC,IAAkBN,EAAAA,EAAAA,UAAS,IACxCO,EAAYC,IAAiBR,EAAAA,EAAAA,UAAS,IACtCS,EAAYC,IAAiBV,EAAAA,EAAAA,UAAS,IACtCW,EAAcC,IAAmBC,EAAAA,EAAAA,OAClC,EAAEC,IAAMC,EAAAA,EAAAA,OAIdC,EAAAA,EAAAA,WAAU,KACN,MAiBMC,EAAUC,SAASP,EAAaQ,IAAI,UAAY,EAGlDF,IAAYZ,EApBQe,WACpBlB,GAAW,GACXE,EAAS,MACT,IACI,MAAMiB,QAAYC,EAAAA,EAAMH,IAAI,kBAADI,OAAmB3B,EAAO,UAAA2B,OAASlB,EAAW,WAAAkB,OAPhE,KAQTxB,EAASsB,EAAIG,KAAK1B,OAClBQ,EAAee,EAAIG,KAAKnB,aACxBG,EAAca,EAAIG,KAAKjB,YACvBG,EAAcW,EAAIG,KAAKf,WAC3B,CAAE,MAAOgB,GACLC,QAAQvB,MAAM,iCAADoB,OAAkC3B,EAAO,MAAM6B,GAC5DrB,EAASU,EAAE,8BAA+B,CAAEa,IAAK/B,IACrD,CAAC,QACGM,GAAW,EACf,GAWJ0B,GAJItB,EAAeW,IAKpB,CAACrB,EAASS,EAAaM,EAAcG,IAexC,IAJAE,EAAAA,EAAAA,WAAU,KACNa,SAASC,MAAQhB,EAAE,uBAAwB,CAAEa,IAAK/B,KACnD,CAACA,EAASkB,IAETb,GAA4B,IAAjBH,EAAMiC,OACjB,OAAOC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,+CAA8CC,SAAEpB,EAAE,mBAG5E,GAAIX,EACA,OAAO6B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yCAAwCC,SAAE/B,IAGpE,MAAMgC,EAAavC,EAAQwC,OAAO,GAAGC,cAAgBzC,EAAQ0C,MAAM,GAEnE,OACIN,EAAAA,EAAAA,KAACO,EAAAA,SAAQ,CAACC,UAAUR,EAAAA,EAAAA,KAAA,OAAKC,UAAU,+CAA8CC,SAAEpB,EAAE,wBAA6BoB,UAC9GO,EAAAA,EAAAA,MAAA,OAAKR,UAAU,8BAA6BC,SAAA,EACxCO,EAAAA,EAAAA,MAAA,MAAIR,UAAU,qFAAoFC,SAAA,CAC7FpB,EAAE,yBAA0B,CAAEa,IAAKQ,IAAc,OAGpC,IAAjBrC,EAAMiC,SAAiB9B,IACpB+B,EAAAA,EAAAA,KAAA,KAAGC,UAAU,uDAAsDC,SAAEpB,EAAE,kCAAmC,CAAEa,IAAKQ,OAGrHH,EAAAA,EAAAA,KAACvC,EAAQ,CACLK,MAAOA,EACPO,YAAaA,EACbE,WAAYA,EACZE,WAAYA,EACZiC,WArCOC,KACnB,MAAMC,EAAWvC,EAAc,EAC/BC,EAAesC,GACfhC,EAAgB,CAAEiC,KAAMD,KAmCZE,UAAW7C,S","sources":["pages/TagPage.js"],"sourcesContent":["// client/src/pages/TagPage.js\r\nimport React, { useState, useEffect, Suspense, lazy } from 'react';\r\nimport { useParams, useSearchParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n// Lazy load BlogList as it's a heavier component\r\nconst BlogList = lazy(() => import('../components/BlogFiles/BlogList'));\r\n\r\n\r\nconst TagPage = () => {\r\n    const { tagName } = useParams(); // Get the tag from the URL parameter\r\n    const [blogs, setBlogs] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(1);\r\n    const [totalBlogs, setTotalBlogs] = useState(0);\r\n    const [searchParams, setSearchParams] = useSearchParams(); // For pagination URL updates\r\n    const { t } = useTranslation();\r\n\r\n    const blogsPerPage = 10; // Consistent with Home.js pagination\r\n\r\n    useEffect(() => {\r\n        const fetchBlogsByTag = async () => {\r\n            setLoading(true);\r\n            setError(null);\r\n            try {\r\n                const res = await axios.get(`/api/blogs?tag=${tagName}&page=${currentPage}&limit=${blogsPerPage}`);\r\n                setBlogs(res.data.blogs);\r\n                setCurrentPage(res.data.currentPage);\r\n                setTotalPages(res.data.totalPages);\r\n                setTotalBlogs(res.data.totalBlogs);\r\n            } catch (err) {\r\n                console.error(`Error fetching blogs for tag \"${tagName}\":`, err);\r\n                setError(t('error loading blogs for tag', { tag: tagName }));\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        const urlPage = parseInt(searchParams.get('page')) || 1;\r\n\r\n        // Always update currentPage from URL, and let it trigger re-fetch\r\n        if (urlPage !== currentPage) {\r\n            setCurrentPage(urlPage);\r\n            return; // skip fetch this time, it will re-run after page state updates\r\n        }\r\n\r\n        fetchBlogsByTag();\r\n    }, [tagName, currentPage, searchParams, t]);\r\n\r\n\r\n    // Handle pagination button click\r\n    const handleLoadMore = () => {\r\n        const nextPage = currentPage + 1;\r\n        setCurrentPage(nextPage);\r\n        setSearchParams({ page: nextPage }); // Update URL search params for persistence\r\n    };\r\n\r\n    // Use a dynamic title for the page\r\n    useEffect(() => {\r\n        document.title = t('page_titles.tag_page', { tag: tagName }); // Use translation for page title\r\n    }, [tagName, t]);\r\n\r\n    if (loading && blogs.length === 0) { // Only show full loading if no blogs are loaded yet\r\n        return <div className=\"text-center py-20 text-lg dark:text-gray-300\">{t('loading blogs')}</div>;\r\n    }\r\n\r\n    if (error) {\r\n        return <div className=\"text-center py-20 text-red-500 text-lg\">{error}</div>;\r\n    }\r\n\r\n    const displayTag = tagName.charAt(0).toUpperCase() + tagName.slice(1); // Capitalize first letter\r\n\r\n    return (\r\n        <Suspense fallback={<div className=\"text-center py-20 text-lg dark:text-gray-300\">{t('loading components')}</div>}>\r\n            <div className=\"container mx-auto px-4 py-8\">\r\n                <h1 className=\"text-3xl md:text-4xl font-extrabold text-center mb-8 text-gray-900 dark:text-white\">\r\n                    {t('tag_page.blogs_for_tag', { tag: displayTag })} {/* Use translation */}\r\n                </h1>\r\n\r\n                {blogs.length === 0 && !loading && (\r\n                    <p className=\"text-center text-lg text-gray-600 dark:text-gray-300\">{t('tag_page.no_blogs_found_for_tag', { tag: displayTag })}</p>\r\n                )}\r\n\r\n                <BlogList\r\n                    blogs={blogs}\r\n                    currentPage={currentPage}\r\n                    totalPages={totalPages}\r\n                    totalBlogs={totalBlogs}\r\n                    onLoadMore={handleLoadMore}\r\n                    isLoading={loading} // Pass loading state to BlogList\r\n                />\r\n            </div>\r\n             \r\n        </Suspense>\r\n    );\r\n};\r\n\r\nexport default TagPage;"],"names":["BlogList","lazy","TagPage","tagName","useParams","blogs","setBlogs","useState","loading","setLoading","error","setError","currentPage","setCurrentPage","totalPages","setTotalPages","totalBlogs","setTotalBlogs","searchParams","setSearchParams","useSearchParams","t","useTranslation","useEffect","urlPage","parseInt","get","async","res","axios","concat","data","err","console","tag","fetchBlogsByTag","document","title","length","_jsx","className","children","displayTag","charAt","toUpperCase","slice","Suspense","fallback","_jsxs","onLoadMore","handleLoadMore","nextPage","page","isLoading"],"sourceRoot":""}